MODULE iWeld

	PERS tooldata tool1 := [TRUE,[[0.0578139,0.390291,316.074],[1,0,0,0]],[0.001,[0,0,0.001],[1,0,0,0],0,0,0]];
	!2.06179,-0.0414207,318.517
	PERS seamdata seam1 := [0,0,[0,0,0,0,0,0,0,0,0],0,0,0,0,0,[0,0,0,0,0,0,0,0,0],0,0,[0,0,0,0,0,0,0,0,0],0,0,[0,0,0,0,0,0,0,0,0],0];
	PERS welddata weld1 := [4.99533,0,[3,3,15,123,0,0,23,452,0],[0,0,0,0,0,0,0,0,0]];
	PERS welddata weld2 := [10,0,[2,1,14,105.833,0,0,1,0.42333,0],[0,0,0,0,0,0,0,0,0]];

 	PERS seamdata sm_Twin := [1,0,[0,0,0,0,0,0,0,0,0],0,0,0,0,0,[0,0,0,0,0,0,0,0,0],0,1,[3,3,29,190.5,0,0,60,148.167,0],0,0,[0,0,0,0,0,0,0,0,0],2];
  	PERS welddata wd_Twin := [10.16,0,[3,3,29,190.5,0,0,60,148.167,0],[0,0,0,0,0,0,0,0,0]];
  	PERS weavedata wv_Twin := [1,1,2.032,10.16,0,0.2,0,0.2,0,0,0,0,0,0,0];
	
	
	PROC weld()
		
		!ArcLStart [[1402.72,153.94,-301.02],[0.186619,0.319409,-0.92796,0.0451741],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, sm_Twin_V, wd_Twin_V\Weave:=wv_Twin_V, fine, tWeldGun;
    	!ArcLEnd [[1400.52,158.14,-263.02],[0.186616,0.31941,-0.927961,0.0451758],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, sm_Twin_V, wd_Twin_V\Weave:=wv_Twin_V, fine, tWeldGun;
		
		
		! +1"
		MoveJ [[1209.22,-6.72,-155.80],[0.413706,-0.585128,0.604999,0.347059],[-1,-2,0,1],[-550.014,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, z50, tool1;
		
		! +.25"
		MoveJ [[1209.19,-6.70,-168.22],[0.413695,-0.585138,0.604989,0.347072],[-1,-2,0,1],[-550.014,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, z50, tool1;
		
		! start point (on surface; +0")
		ArcLStart [[1209.18,-6.70,-170.65],[0.413683,-0.585121,0.605005,0.347085],[-1,-2,0,1],[-550.015,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, seam1, weld1, \Weave:=wv_Twin, fine, tool1;
		
		! point on weld line (on surface) * n-2 points

			
		! endpoint on weld line (on surface)
		ArcLEnd [[1209.16,-47.61,-170.66],[0.413686,-0.585083,0.605038,0.34709],[-1,-2,0,1],[-550.014,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, seam1, weld1, \Weave:=wv_Twin, fine, tool1;
		
		! +1"
		MoveJ [[1209.08,-47.60,-84.14],[0.413635,-0.585086,0.605044,0.347135],[-1,-2,0,1],[-550.013,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, z50, tool1;
		
			! +1"
		MoveJ [[1721.80,2.37,-38.74],[0.41365,-0.585096,0.605038,0.347109],[-1,-2,0,1],[-550.013,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, z50, tool1;
		
		! +.25"
		MoveJ [[1721.78,2.37,-163.39],[0.413646,-0.585094,0.605034,0.347127],[-1,-2,0,1],[-550.013,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, z50, tool1;
		
		! start point (on surface; +0")
		ArcLStart [[1722.23,-0.60,-171.25],[0.413662,-0.585094,0.60502,0.347131],[-1,-2,0,1],[-550.014,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, seam1, weld1, \Weave:=wv_Twin, fine, tool1;
		
		! point on weld line (on surface) * n-2 points

			
		! endpoint on weld line (on surface)
		ArcLEnd [[1723.15,-45.51,-171.27],[0.413678,-0.585073,0.605024,0.34714],[-1,-2,0,1],[-550.015,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, seam1, weld1, \Weave:=wv_Twin, fine, tool1;
		
		! +1"
		MoveJ [[1723.13,-45.52,-146.29],[0.413669,-0.585081,0.605018,0.347147],[-1,-2,0,1],[-550.015,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, z50, tool1;
	ENDPROC

	PROC flip()
		VAR num steps := 100;
		VAR num cpos := 1; 
		setDO geckoDisable, 1;
		WaitTime 1;
		setDO geckoDisable, 0;
		setDO geckoDir, 1;
		
		WaitTime 2;
		WHILE cpos < steps DO
			pulseDO \PLength:=.001, geckoStep;
		ENDWHILE
			
	ENDPROC
		

	PROC zero()
		MoveAbsJ [[0,0,0,0,0,0],[tableHeight,9E+09,9E+09,9E+09,9E+09,9E+09]]\NoEOffs, v1000, fine, tool0;
	ENDPROC

ENDMODULE